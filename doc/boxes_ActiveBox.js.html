<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Source: boxes/ActiveBox.js</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body class="dark" data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><a href="/" class="sidebar-title sidebar-title-anchor">Home</a><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="qHlACl8CFdcBMSnoHvrhv"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-AWT.html">AWT</a></div><div class="sidebar-section-children"><a href="module-Activity.html">Activity</a></div><div class="sidebar-section-children"><a href="module-JClic.html">JClic</a></div><div class="sidebar-section-children"><a href="module-JClicPlayer.html">JClicPlayer</a></div><div class="sidebar-section-children"><a href="module-PlayerHistory.html">PlayerHistory</a></div><div class="sidebar-section-children"><a href="module-Utils.html">Utils</a></div><div class="sidebar-section-children"><a href="module-activities_associations_ComplexAssociation.html">activities/associations/ComplexAssociation</a></div><div class="sidebar-section-children"><a href="module-activities_associations_SimpleAssociation.html">activities/associations/SimpleAssociation</a></div><div class="sidebar-section-children"><a href="module-activities_memory_MemoryGame.html">activities/memory/MemoryGame</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Explore.html">activities/panels/Explore</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Identify.html">activities/panels/Identify</a></div><div class="sidebar-section-children"><a href="module-activities_panels_InformationScreen.html">activities/panels/InformationScreen</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Menu.html">activities/panels/Menu</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_DoublePuzzle.html">activities/puzzles/DoublePuzzle</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_ExchangePuzzle.html">activities/puzzles/ExchangePuzzle</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_HolePuzzle.html">activities/puzzles/HolePuzzle</a></div><div class="sidebar-section-children"><a href="module-activities_text_Complete.html">activities/text/Complete</a></div><div class="sidebar-section-children"><a href="module-activities_text_Evaluator.html">activities/text/Evaluator</a></div><div class="sidebar-section-children"><a href="module-activities_text_FillInBlanks.html">activities/text/FillInBlanks</a></div><div class="sidebar-section-children"><a href="module-activities_text_IdentifyText.html">activities/text/IdentifyText</a></div><div class="sidebar-section-children"><a href="module-activities_text_OrderText.html">activities/text/OrderText</a></div><div class="sidebar-section-children"><a href="module-activities_text_TextActivityBase.html">activities/text/TextActivityBase</a></div><div class="sidebar-section-children"><a href="module-activities_text_TextActivityDocument.html">activities/text/TextActivityDocument</a></div><div class="sidebar-section-children"><a href="module-activities_text_WrittenAnswer.html">activities/text/WrittenAnswer</a></div><div class="sidebar-section-children"><a href="module-activities_textGrid_CrossWord.html">activities/textGrid/CrossWord</a></div><div class="sidebar-section-children"><a href="module-activities_textGrid_WordSearch.html">activities/textGrid/WordSearch</a></div><div class="sidebar-section-children"><a href="module-automation_AutoContentProvider.html">automation/AutoContentProvider</a></div><div class="sidebar-section-children"><a href="module-automation_arith_Arith.html">automation/arith/Arith</a></div><div class="sidebar-section-children"><a href="module-bags_ActivitySequence.html">bags/ActivitySequence</a></div><div class="sidebar-section-children"><a href="module-bags_ActivitySequenceElement.html">bags/ActivitySequenceElement</a></div><div class="sidebar-section-children"><a href="module-bags_ActivitySequenceJump.html">bags/ActivitySequenceJump</a></div><div class="sidebar-section-children"><a href="module-bags_ConditionalJumpInfo.html">bags/ConditionalJumpInfo</a></div><div class="sidebar-section-children"><a href="module-bags_JumpInfo.html">bags/JumpInfo</a></div><div class="sidebar-section-children"><a href="module-bags_MediaBag.html">bags/MediaBag</a></div><div class="sidebar-section-children"><a href="module-bags_MediaBagElement.html">bags/MediaBagElement</a></div><div class="sidebar-section-children"><a href="module-boxes_AbstractBox.html">boxes/AbstractBox</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBagContent.html">boxes/ActiveBagContent</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBox.html">boxes/ActiveBox</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxBag.html">boxes/ActiveBoxBag</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxContent.html">boxes/ActiveBoxContent</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxGrid.html">boxes/ActiveBoxGrid</a></div><div class="sidebar-section-children"><a href="module-boxes_BoxBag.html">boxes/BoxBag</a></div><div class="sidebar-section-children"><a href="module-boxes_BoxBase.html">boxes/BoxBase</a></div><div class="sidebar-section-children"><a href="module-boxes_BoxConnector.html">boxes/BoxConnector</a></div><div class="sidebar-section-children"><a href="module-boxes_TextGrid.html">boxes/TextGrid</a></div><div class="sidebar-section-children"><a href="module-boxes_TextGridContent.html">boxes/TextGridContent</a></div><div class="sidebar-section-children"><a href="module-media_ActiveMediaBag.html">media/ActiveMediaBag</a></div><div class="sidebar-section-children"><a href="module-media_ActiveMediaPlayer.html">media/ActiveMediaPlayer</a></div><div class="sidebar-section-children"><a href="module-media_AudioBuffer.html">media/AudioBuffer</a></div><div class="sidebar-section-children"><a href="module-media_EventSounds.html">media/EventSounds</a></div><div class="sidebar-section-children"><a href="module-media_EventSoundsElement.html">media/EventSoundsElement</a></div><div class="sidebar-section-children"><a href="module-media_MediaContent.html">media/MediaContent</a></div><div class="sidebar-section-children"><a href="module-media_MidiAudioPlayer.html">media/MidiAudioPlayer</a></div><div class="sidebar-section-children"><a href="module-project_JClicProject.html">project/JClicProject</a></div><div class="sidebar-section-children"><a href="module-project_ProjectSettings.html">project/ProjectSettings</a></div><div class="sidebar-section-children"><a href="module-report_ActionReg.html">report/ActionReg</a></div><div class="sidebar-section-children"><a href="module-report_ActivityReg.html">report/ActivityReg</a></div><div class="sidebar-section-children"><a href="module-report_EncryptMin.html">report/EncryptMin</a></div><div class="sidebar-section-children"><a href="module-report_Reporter.html">report/Reporter</a></div><div class="sidebar-section-children"><a href="module-report_SCORM.html">report/SCORM</a></div><div class="sidebar-section-children"><a href="module-report_SequenceReg.html">report/SequenceReg</a></div><div class="sidebar-section-children"><a href="module-report_SessionReg.html">report/SessionReg</a></div><div class="sidebar-section-children"><a href="module-report_SessionStorageReporter.html">report/SessionStorageReporter</a></div><div class="sidebar-section-children"><a href="module-report_TCPReporter.html">report/TCPReporter</a></div><div class="sidebar-section-children"><a href="module-shapers_ClassicJigSaw.html">shapers/ClassicJigSaw</a></div><div class="sidebar-section-children"><a href="module-shapers_Holes.html">shapers/Holes</a></div><div class="sidebar-section-children"><a href="module-shapers_JigSaw.html">shapers/JigSaw</a></div><div class="sidebar-section-children"><a href="module-shapers_Rectangular.html">shapers/Rectangular</a></div><div class="sidebar-section-children"><a href="module-shapers_Shaper.html">shapers/Shaper</a></div><div class="sidebar-section-children"><a href="module-shapers_TriangularJigSaw.html">shapers/TriangularJigSaw</a></div><div class="sidebar-section-children"><a href="module-skins_BlueSkin.html">skins/BlueSkin</a></div><div class="sidebar-section-children"><a href="module-skins_Counter.html">skins/Counter</a></div><div class="sidebar-section-children"><a href="module-skins_CustomSkin.html">skins/CustomSkin</a></div><div class="sidebar-section-children"><a href="module-skins_DefaultSkin.html">skins/DefaultSkin</a></div><div class="sidebar-section-children"><a href="module-skins_EmptySkin.html">skins/EmptySkin</a></div><div class="sidebar-section-children"><a href="module-skins_GreenSkin.html">skins/GreenSkin</a></div><div class="sidebar-section-children"><a href="module-skins_MiniSkin.html">skins/MiniSkin</a></div><div class="sidebar-section-children"><a href="module-skins_OrangeSkin.html">skins/OrangeSkin</a></div><div class="sidebar-section-children"><a href="module-skins_SimpleSkin.html">skins/SimpleSkin</a></div><div class="sidebar-section-children"><a href="module-skins_Skin.html">skins/Skin</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="xnPDc3I_kKVhPtm1lO4E8"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-AWT.Action.html">Action</a></div><div class="sidebar-section-children"><a href="module-AWT.Container.html">Container</a></div><div class="sidebar-section-children"><a href="module-AWT.Dimension.html">Dimension</a></div><div class="sidebar-section-children"><a href="module-AWT.Ellipse.html">Ellipse</a></div><div class="sidebar-section-children"><a href="module-AWT.Font.html">Font</a></div><div class="sidebar-section-children"><a href="module-AWT.Gradient.html">Gradient</a></div><div class="sidebar-section-children"><a href="module-AWT.Path.html">Path</a></div><div class="sidebar-section-children"><a href="module-AWT.PathStroke.html">PathStroke</a></div><div class="sidebar-section-children"><a href="module-AWT.Point.html">Point</a></div><div class="sidebar-section-children"><a href="module-AWT.Rectangle.html">Rectangle</a></div><div class="sidebar-section-children"><a href="module-AWT.Shape.html">Shape</a></div><div class="sidebar-section-children"><a href="module-AWT.Stroke.html">Stroke</a></div><div class="sidebar-section-children"><a href="module-AWT.Timer.html">Timer</a></div><div class="sidebar-section-children"><a href="module-Activity.Activity.html">Activity</a></div><div class="sidebar-section-children"><a href="module-Activity.ActivityPanel.html">ActivityPanel</a></div><div class="sidebar-section-children"><a href="module-JClicPlayer.JClicPlayer.html">JClicPlayer</a></div><div class="sidebar-section-children"><a href="module-PlayerHistory.PlayerHistory.html">PlayerHistory</a></div><div class="sidebar-section-children"><a href="module-activities_associations_ComplexAssociation.ComplexAssociation.html">ComplexAssociation</a></div><div class="sidebar-section-children"><a href="module-activities_associations_ComplexAssociation.ComplexAssociationPanel.html">ComplexAssociationPanel</a></div><div class="sidebar-section-children"><a href="module-activities_associations_SimpleAssociation.SimpleAssociation.html">SimpleAssociation</a></div><div class="sidebar-section-children"><a href="module-activities_associations_SimpleAssociation.SimpleAssociationPanel.html">SimpleAssociationPanel</a></div><div class="sidebar-section-children"><a href="module-activities_memory_MemoryGame.MemoryGame.html">MemoryGame</a></div><div class="sidebar-section-children"><a href="module-activities_memory_MemoryGame.MemoryGamePanel.html">MemoryGamePanel</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Explore.Explore.html">Explore</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Explore.ExplorePanel.html">ExplorePanel</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Identify.Identify.html">Identify</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Identify.IdentifyPanel.html">IdentifyPanel</a></div><div class="sidebar-section-children"><a href="module-activities_panels_InformationScreen.InformationScreen.html">InformationScreen</a></div><div class="sidebar-section-children"><a href="module-activities_panels_InformationScreen.InformationScreenPanel.html">InformationScreenPanel</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Menu.Menu.html">Menu</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Menu.MenuPanel.html">MenuPanel</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_DoublePuzzle.DoublePuzzle.html">DoublePuzzle</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_DoublePuzzle.DoublePuzzlePanel.html">DoublePuzzlePanel</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_ExchangePuzzle.ExchangePuzzle.html">ExchangePuzzle</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_ExchangePuzzle-ExchangePuzzlePanel.html">ExchangePuzzlePanel</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_HolePuzzle.HolePuzzle.html">HolePuzzle</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_HolePuzzle.HolePuzzlePanel.html">HolePuzzlePanel</a></div><div class="sidebar-section-children"><a href="module-activities_text_Complete.Complete.html">Complete</a></div><div class="sidebar-section-children"><a href="module-activities_text_Complete.CompletePanel.html">CompletePanel</a></div><div class="sidebar-section-children"><a href="module-activities_text_Evaluator.BasicEvaluator.html">BasicEvaluator</a></div><div class="sidebar-section-children"><a href="module-activities_text_Evaluator.ComplexEvaluator.html">ComplexEvaluator</a></div><div class="sidebar-section-children"><a href="module-activities_text_Evaluator.Evaluator.html">Evaluator</a></div><div class="sidebar-section-children"><a href="module-activities_text_FillInBlanks.FillInBlanks.html">FillInBlanks</a></div><div class="sidebar-section-children"><a href="module-activities_text_FillInBlanks.FillInBlanksPanel.html">FillInBlanksPanel</a></div><div class="sidebar-section-children"><a href="module-activities_text_IdentifyText.IdentifyText.html">IdentifyText</a></div><div class="sidebar-section-children"><a href="module-activities_text_IdentifyText-IdentifyTextPanel.html">IdentifyTextPanel</a></div><div class="sidebar-section-children"><a href="module-activities_text_OrderText.OrderText.html">OrderText</a></div><div class="sidebar-section-children"><a href="module-activities_text_OrderText.OrderTextPanel.html">OrderTextPanel</a></div><div class="sidebar-section-children"><a href="module-activities_text_TextActivityBase.TextActivityBase.html">TextActivityBase</a></div><div class="sidebar-section-children"><a href="module-activities_text_TextActivityBase.TextActivityBasePanel.html">TextActivityBasePanel</a></div><div class="sidebar-section-children"><a href="module-activities_text_TextActivityDocument.TextActivityDocument.html">TextActivityDocument</a></div><div class="sidebar-section-children"><a href="module-activities_text_TextActivityDocument.TextTarget.html">TextTarget</a></div><div class="sidebar-section-children"><a href="module-activities_text_WrittenAnswer.WrittenAnswer.html">WrittenAnswer</a></div><div class="sidebar-section-children"><a href="module-activities_text_WrittenAnswer.WrittenAnswerPanel.html">WrittenAnswerPanel</a></div><div class="sidebar-section-children"><a href="module-activities_textGrid_CrossWord.CrossWord.html">CrossWord</a></div><div class="sidebar-section-children"><a href="module-activities_textGrid_CrossWord.CrossWordPanel.html">CrossWordPanel</a></div><div class="sidebar-section-children"><a href="module-activities_textGrid_WordSearch.WordSearch.html">WordSearch</a></div><div class="sidebar-section-children"><a href="module-activities_textGrid_WordSearch.WordSearchPanel.html">WordSearchPanel</a></div><div class="sidebar-section-children"><a href="module-automation_AutoContentProvider.AutoContentProvider.html">AutoContentProvider</a></div><div class="sidebar-section-children"><a href="module-automation_AutoContentProvider.AutoContentProvider.ActiveBagContentKit.html">ActiveBagContentKit</a></div><div class="sidebar-section-children"><a href="module-automation_arith_Arith.Arith.html">Arith</a></div><div class="sidebar-section-children"><a href="module-automation_arith_Arith.Arith.Operator.html">Operator</a></div><div class="sidebar-section-children"><a href="module-bags_ActivitySequence.ActivitySequence.html">ActivitySequence</a></div><div class="sidebar-section-children"><a href="module-bags_ActivitySequenceElement.ActivitySequenceElement.html">ActivitySequenceElement</a></div><div class="sidebar-section-children"><a href="module-bags_ActivitySequenceJump.ActivitySequenceJump.html">ActivitySequenceJump</a></div><div class="sidebar-section-children"><a href="module-bags_ConditionalJumpInfo.ConditionalJumpInfo.html">ConditionalJumpInfo</a></div><div class="sidebar-section-children"><a href="module-bags_JumpInfo.JumpInfo.html">JumpInfo</a></div><div class="sidebar-section-children"><a href="module-bags_MediaBag.MediaBag.html">MediaBag</a></div><div class="sidebar-section-children"><a href="module-bags_MediaBagElement.MediaBagElement.html">MediaBagElement</a></div><div class="sidebar-section-children"><a href="module-boxes_AbstractBox.AbstractBox.html">AbstractBox</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBagContent.ActiveBagContent.html">ActiveBagContent</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBox.ActiveBox.html">ActiveBox</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxBag.ActiveBoxBag.html">ActiveBoxBag</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxContent.ActiveBoxContent.html">ActiveBoxContent</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxContent.AlignType.html">AlignType</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxGrid.ActiveBoxGrid.html">ActiveBoxGrid</a></div><div class="sidebar-section-children"><a href="module-boxes_BoxBag.BoxBag.html">BoxBag</a></div><div class="sidebar-section-children"><a href="module-boxes_BoxBase.BoxBase.html">BoxBase</a></div><div class="sidebar-section-children"><a href="module-boxes_BoxConnector.BoxConnector.html">BoxConnector</a></div><div class="sidebar-section-children"><a href="module-boxes_TextGrid.TextGrid.html">TextGrid</a></div><div class="sidebar-section-children"><a href="module-boxes_TextGridContent.TextGridContent.html">TextGridContent</a></div><div class="sidebar-section-children"><a href="module-media_ActiveMediaBag.ActiveMediaBag.html">ActiveMediaBag</a></div><div class="sidebar-section-children"><a href="module-media_ActiveMediaPlayer.ActiveMediaPlayer.html">ActiveMediaPlayer</a></div><div class="sidebar-section-children"><a href="module-media_AudioBuffer.AudioBuffer.html">AudioBuffer</a></div><div class="sidebar-section-children"><a href="module-media_EventSounds.EventSounds.html">EventSounds</a></div><div class="sidebar-section-children"><a href="module-media_EventSoundsElement.EventSoundsElement.html">EventSoundsElement</a></div><div class="sidebar-section-children"><a href="module-media_MediaContent.MediaContent.html">MediaContent</a></div><div class="sidebar-section-children"><a href="module-media_MidiAudioPlayer.MidiAudioPlayer.html">MidiAudioPlayer</a></div><div class="sidebar-section-children"><a href="module-project_JClicProject.JClicProject.html">JClicProject</a></div><div class="sidebar-section-children"><a href="module-project_ProjectSettings.ProjectSettings.html">ProjectSettings</a></div><div class="sidebar-section-children"><a href="module-report_ActionReg.ActionReg.html">ActionReg</a></div><div class="sidebar-section-children"><a href="module-report_ActivityReg.ActivityReg.html">ActivityReg</a></div><div class="sidebar-section-children"><a href="module-report_EncryptMin.Encryption.html">Encryption</a></div><div class="sidebar-section-children"><a href="module-report_Reporter.Reporter.html">Reporter</a></div><div class="sidebar-section-children"><a href="module-report_Reporter.ReporterInfo.html">ReporterInfo</a></div><div class="sidebar-section-children"><a href="module-report_SCORM.SCORM.html">SCORM</a></div><div class="sidebar-section-children"><a href="module-report_SequenceReg.SequenceReg.html">SequenceReg</a></div><div class="sidebar-section-children"><a href="module-report_SequenceReg.SequenceRegInfo.html">SequenceRegInfo</a></div><div class="sidebar-section-children"><a href="module-report_SessionReg.SessionReg.html">SessionReg</a></div><div class="sidebar-section-children"><a href="module-report_SessionReg.SessionRegInfo.html">SessionRegInfo</a></div><div class="sidebar-section-children"><a href="module-report_SessionStorageReporter.SessionStorageReporter.html">SessionStorageReporter</a></div><div class="sidebar-section-children"><a href="module-report_TCPReporter.ReportBean.html">ReportBean</a></div><div class="sidebar-section-children"><a href="module-report_TCPReporter.TCPReporter.html">TCPReporter</a></div><div class="sidebar-section-children"><a href="module-shapers_ClassicJigSaw.ClassicJigSaw.html">ClassicJigSaw</a></div><div class="sidebar-section-children"><a href="module-shapers_Holes.Holes.html">Holes</a></div><div class="sidebar-section-children"><a href="module-shapers_JigSaw.JigSaw.html">JigSaw</a></div><div class="sidebar-section-children"><a href="module-shapers_Rectangular.Rectangular.html">Rectangular</a></div><div class="sidebar-section-children"><a href="module-shapers_Shaper.Shaper.html">Shaper</a></div><div class="sidebar-section-children"><a href="module-shapers_TriangularJigSaw.TriangularJigSaw.html">TriangularJigSaw</a></div><div class="sidebar-section-children"><a href="module-skins_BlueSkin.BlueSkin.html">BlueSkin</a></div><div class="sidebar-section-children"><a href="module-skins_Counter.Counter.html">Counter</a></div><div class="sidebar-section-children"><a href="module-skins_CustomSkin.CustomSkin.html">CustomSkin</a></div><div class="sidebar-section-children"><a href="module-skins_DefaultSkin.DefaultSkin.html">DefaultSkin</a></div><div class="sidebar-section-children"><a href="module-skins_EmptySkin.EmptySkin.html">EmptySkin</a></div><div class="sidebar-section-children"><a href="module-skins_GreenSkin.GreenSkin.html">GreenSkin</a></div><div class="sidebar-section-children"><a href="module-skins_MiniSkin.MiniSkin.html">MiniSkin</a></div><div class="sidebar-section-children"><a href="module-skins_OrangeSkin.OrangeSkin.html">OrangeSkin</a></div><div class="sidebar-section-children"><a href="module-skins_SimpleSkin.SimpleSkin.html">SimpleSkin</a></div><div class="sidebar-section-children"><a href="module-skins_Skin.Skin.html">Skin</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="xJuSofp4IKU_YxKjABy4G"><div>Externals</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="external-AudioContext.html">AudioContext</a></div><div class="sidebar-section-children"><a href="external-CanvasRenderingContext2D.html">CanvasRenderingContext2D</a></div><div class="sidebar-section-children"><a href="external-Collator.html">Collator</a></div><div class="sidebar-section-children"><a href="external-Date.html">Date</a></div><div class="sidebar-section-children"><a href="external-Event.html">Event</a></div><div class="sidebar-section-children"><a href="external-HTMLAudioElement.html">HTMLAudioElement</a></div><div class="sidebar-section-children"><a href="external-HTMLElement.html">HTMLElement</a></div><div class="sidebar-section-children"><a href="external-HTMLImageElement.html">HTMLImageElement</a></div><div class="sidebar-section-children"><a href="external-HTMLStyleElement.html">HTMLStyleElement</a></div><div class="sidebar-section-children"><a href="external-Instrument.html">Instrument</a></div><div class="sidebar-section-children"><a href="external-JSZip.html">JSZip</a></div><div class="sidebar-section-children"><a href="external-MediaRecorder.html">MediaRecorder</a></div><div class="sidebar-section-children"><a href="external-MidiPlayerJS.html">MidiPlayerJS</a></div><div class="sidebar-section-children"><a href="external-NamedNodeMap.html">NamedNodeMap</a></div><div class="sidebar-section-children"><a href="external-Promise.html">Promise</a></div><div class="sidebar-section-children"><a href="external-Storage.html">Storage</a></div><div class="sidebar-section-children"><a href="external-jQuery.html">jQuery</a></div><div class="sidebar-section-children"><a href="external-jqXHR.html">jqXHR</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section id="source-page" class="source-page"><header><h1 id="title" class="has-anchor">boxes_ActiveBox.js</h1></header><article><pre class="prettyprint source lang-js"><code>/**
 *  File    : boxes/ActiveBox.js
 *  Created : 18/04/2015
 *  By      : Francesc Busquets &lt;francesc@gmail.com>
 *
 *  JClic.js
 *  An HTML5 player of JClic activities
 *  https://projectestac.github.io/jclic.js
 *
 *  @source https://github.com/projectestac/jclic.js
 *
 *  @license EUPL-1.2
 *  @licstart
 *  (c) 2000-2020 Educational Telematic Network of Catalonia (XTEC)
 *
 *  Licensed under the EUPL, Version 1.1 or -as soon they will be approved by
 *  the European Commission- subsequent versions of the EUPL (the "Licence");
 *  You may not use this work except in compliance with the Licence.
 *
 *  You may obtain a copy of the Licence at:
 *  https://joinup.ec.europa.eu/software/page/eupl
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the Licence is distributed on an "AS IS" basis, WITHOUT
 *  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 *  Licence for the specific language governing permissions and limitations
 *  under the Licence.
 *  @licend
 *  @module
 */

/* global document */

import $ from 'jquery';
import AbstractBox from './AbstractBox';
import ActiveBoxContent from './ActiveBoxContent';
import ActiveBagContent from './ActiveBagContent';
import { Rectangle, Point, Container } from '../AWT';
import { settings, log, getMsg } from '../Utils';

/**
 * Objects of this class are widely used in JClic activities: cells in puzzles and associations,
 * messages and other objects are active boxes.
 *
 * The specific content, size and location of `ActiveBox` objects is determined by its
 * {@link module:boxes/ActiveBoxContent.ActiveBoxContent ActiveBoxContent} member. Most ActiveBoxes have only one content, but some of them can
 * have a secondary or "alternative" content stored in the `altContent` field. This content is
 * used only when the `alternative` flag of the ActiveBox is `on`.
 *
 * Active boxes can host video and interactive media content (specified in the `mediaContent`
 * member of the {@link module:boxes/ActiveBoxContent.ActiveBoxContent ActiveBoxContent} through its `hostedMediaPlayer` member.
 * @extends module:boxes/AbstractBox.AbstractBox
 */
export class ActiveBox extends AbstractBox {
  /**
   * ActiveBox constructor
   * @param {module:boxes/AbstractBox.AbstractBox} [parent] - The AbstractBox to which this ActiveBox belongs
   * @param {module:AWT.Container} [container] - The container where this box is placed.
   * @param {module:boxes/BoxBase.BoxBase} [boxBase] - The object where colors, fonts, border and other graphic properties
   * of this box are defined.
   * @param {number} [setIdLoc] - A numeric identifier, used to locate this box in a set of sibling objects.
   * @param {module:AWT.Rectangle} [rect] - The initial bounds of the box.
   */
  constructor(parent, container, boxBase, setIdLoc, rect) {
    // ActiveBox extends AbstractBox
    super(parent, container, boxBase);
    this.clear();
    if (typeof setIdLoc === 'number') {
      this.idLoc = setIdLoc;
      this.idAss = 0;
      this.idOrder = 0;
    }
    if (rect)
      this.setBounds(rect);
  }

  /**
   * Factory constructor that creates a new cell inside a JQuery DOM element.
   * @param {external:jQuery} $dom - The DOM element that will act as a container
   * @param {module:boxes/ActiveBoxContent.ActiveBoxContent} abc - The cell's content. Must not be null and have the `dimension`
   * member initialized.
   * @returns {module:boxes/ActiveBox.ActiveBox}
   */
  static createCell($dom, abc) {
    if (abc &amp;&amp; abc.dimension) {
      const
        box = new ActiveBox(),
        $canvas = $('&lt;canvas width="' + abc.dimension.width + '" height="' + abc.dimension.height + '"/>'),
        rect = new Rectangle(0, 0, abc.dimension.width, abc.dimension.height);
      box.container = new Container();
      box.container.$div = $dom;
      box.setContent(abc);
      box.setBounds(rect);
      $dom.append($canvas);
      // Create accessible, focusable elements only for cells with media content
      // TODO: remove focus mark on blur in cells placed on fillInBlanks activities
      if (abc.mediaContent)
        box.buildAccessibleElement($canvas, $dom);
      box.update($canvas.get(-1).getContext('2d'), rect);
      return box;
    }
  }

  /**
   * Returns the current content used by the box
   * @returns {module:boxes/ActiveBoxContent.ActiveBoxContent}
   */
  getCurrentContent() {
    return this.isAlternative() ? this.altContent : this.content;
  }

  /**
   * Returns the current content, creating an empty one if needed.
   * @returns {module:boxes/ActiveBoxContent.ActiveBoxContent}
   */
  getContent() {
    if (!this.content)
      this.setContent(new ActiveBoxContent());
    return this.content;
  }

  /**
   * Clears the current content
   */
  clear() {
    this.content = null;
    this.altContent = null;
    this.idOrder = -1;
    this.setInactive(true);
    if (!this.hasHostedComponent)
      this.setHostedComponent(null);
    this.setHostedMediaPlayer(null);
    if (this.$accessibleElement)
      this.$accessibleElement.html('');
    if (this.tmpTrans)
      this.tmpTrans = false;
    this.invalidate();
  }

  /**
   * Checks if two ActiveBox objects have equivalent content
   * @param {module:boxes/ActiveBox.ActiveBox} bx - The ActiveBox to check against this.
   * @param {boolean} [checkCase] - When `true`, the comparing will be case-sensitive.
   * @returns {boolean} - `true` if both cells are equivalent.
   */
  isEquivalent(bx, checkCase) {
    return bx !== null &amp;&amp;
      this.content !== null &amp;&amp;
      this.content.isEquivalent(bx.content, checkCase);
  }

  /**
   * Same functionality as {@link module:boxes/ActiveBox.ActiveBox#isEquivalent isEquivalent}, but comparing the current content.
   * @param {module:boxes/ActiveBox.ActiveBox} bx - The ActiveBox to check against this.
   * @param {boolean} [checkCase] - When `true`, the comparing will be case-sensitive.
   * @returns {boolean}
   */
  isCurrentContentEquivalent(bx, checkCase) {
    return bx !== null &amp;&amp;
      this.getCurrentContent() !== null &amp;&amp;
      this.getCurrentContent().isEquivalent(bx.getCurrentContent(), checkCase);
  }

  /**
   * Swaps the location of two active boxes
   * @param {module:boxes/ActiveBox.ActiveBox} bx - The ActiveBox to swap with this one.
   */
  exchangeLocation(bx) {
    const
      pt = new Point(this.pos),
      idLoc0 = this.idLoc;
    this.moveTo(bx.pos);
    bx.moveTo(pt);
    this.idLoc = bx.idLoc;
    bx.idLoc = idLoc0;
  }

  /**
   * Copy the content of another ActiveBox into this one
   * @param {module:boxes/ActiveBox.ActiveBox} bx - The ActiveBox from which to take the content
   */
  copyContent(bx) {
    this.idOrder = bx.idOrder;
    this.idAss = bx.idAss;
    this.content = bx.content;
    this.altContent = bx.altContent;
    if (this.content) {
      if (this.content.style)
        this.setBoxBase(this.content.style);
      if (this.content.border !== null &amp;&amp; bx.hasBorder() !== this.content.border)
        this.setBorder(this.content.border);
    }
    this.setInactive(bx.isInactive());
    this.setInverted(bx.isInverted());
    this.setAlternative(bx.isAlternative());
    this.setHostedComponent(bx.getHostedComponent());
    this.hasHostedComponent = bx.hasHostedComponent;
    this.setHostedMediaPlayer(bx.hostedMediaPlayer);
    if (this.hostedMediaPlayer)
      this.hostedMediaPlayer.setVisualComponentVisible(!this.isInactive() &amp;&amp; this.isVisible());
    if (this.$accessibleElement)
      this.$accessibleElement.html(this.toString());
  }

  /**
   *
   * Exhanges the content of this ActiveBox with another one
   * @param {module:boxes/ActiveBox.ActiveBox} bx - The ActiveBox with which to exchange the content.
   */
  exchangeContent(bx) {
    const bx0 = new ActiveBox(this.getParent(), this.getContainerX(), this.boxBase);
    bx0.copyContent(this);
    this.copyContent(bx);
    bx.copyContent(bx0);
  }

  /**
   *
   * Sets the text content of this ActiveBox.
   * @param {string} tx - The text to set.
   */
  setTextContent(tx) {
    // only plain text!
    if (!tx)
      tx = '';
    if (!this.content)
      this.content = new ActiveBoxContent();
    this.content.text = tx;
    this.content.mediaContent = null;
    this.content.img = null;

    this.setHostedComponent(null);
    this.setInactive(false);
    this.checkHostedComponent();
    this.setHostedMediaPlayer(null);

    if (this.$accessibleElement)
      this.$accessibleElement.html(this.toString());
  }

  /**
   * Sets the default value to `idAss`
   */
  setDefaultIdAss() {
    this.idAss = this.content === null ? -1 : this.content.id;
  }

  /**
   * Checks if this ActiveBox is at its original place.
   * @returns {boolean}
   */
  isAtPlace() {
    return this.idOrder === this.idLoc;
  }

  /**
   * Sets the {@link module:boxes/ActiveBoxContent.ActiveBoxContent ActiveBoxContent} of this ActiveBox
   * @param {ActiveBoxContent|ActiveBagContent} abc - Object containing the content to set.
   * @param {number} i - When `abc` is an {@link module:boxes/ActiveBagContent.ActiveBagContent ActiveBagContent}, this field indicates an
   * index in the content array.
   */
  setContent(abc, i) {
    if (abc instanceof ActiveBagContent) {
      if (i &lt; 0)
        i = this.idOrder;
      if (i >= abc.getNumCells())
        return;
      if (abc.style !== this.boxBase)
        this.setBoxBase(abc.style);

      // `abc` is now an [ActiveBoxContent](ActiveBoxContent.html)
      abc = abc.getActiveBoxContent(i);
    }
    this.setHostedComponent(null);
    this.setHostedMediaPlayer(null);
    this.content = abc;
    if (abc) {
      if (abc.animatedGifFile &amp;&amp; !this.specialShape) {
        const url = `url(${abc.animatedGifFile})`;
        const $hc = $('&lt;span/>').css({
          'background-image': url,
          'background-position': 'center',
          'background-repeat': 'no-repeat'
        });
        // Save background image for later use
        $hc.data('background-image', url);

        if (abc.imgClip !== null) {
          $hc.css({
            'background-origin': 'border-box',
            'background-position': `${-abc.imgClip.pos.x}px ${-abc.imgClip.pos.y}px`
            // TODO: Use background-size only when the original image must be compressed
            //,'background-size': abc.imgClip.dim.width + 'px ' + abc.imgClip.dim.height + 'px'
          });
        }
        this.setHostedComponent($hc);
      }

      if (abc.style !== this.boxBase)
        this.setBoxBase(abc.style);

      if (abc.innerHtmlText)
        this.setHostedComponent($('&lt;div/>').html(abc.innerHtmlText));

      if (abc.hasOwnProperty('border') &amp;&amp; this.hasBorder() !== abc.border)
        this.setBorder(abc.border);
      this.setInactive(false);
      if (abc.amp)
        this.setHostedMediaPlayer(abc.amp);
      this.checkHostedComponent();
      this.checkAutoStartMedia();
    } else
      this.clear();

    this.invalidate();
    if (this.$accessibleElement)
      this.$accessibleElement.html(this.toString());
  }

  /**
   * Sets the {@link module:boxes/ActiveBoxContent.ActiveBoxContent ActiveBoxContent} that will act as an alternative content (`altContent` field)
   * of this ActiveBox,
   * @param {ActiveBoxContent|ActiveBagContent} abc - Object containing the content to set.
   * @param {number} i - When `abc` is an {@link module:boxes/ActiveBagContent.ActiveBagContent ActiveBagContent}, this field indicates an
   * index in the content array.
   */
  setAltContent(abc, i) {
    if (abc instanceof ActiveBagContent) {
      if (i &lt; 0)
        i = this.idOrder;
      // `abc` is now an [ActiveBoxContent](ActiveBoxContent.html)
      abc = abc.getActiveBoxContent(i);
    }
    this.altContent = abc;
    this.checkHostedComponent();
    if (this.isAlternative() &amp;&amp; this.hostedMediaPlayer)
      this.setHostedMediaPlayer(null);

    if (this.$accessibleElement) {
      this.$accessibleElement.html(this.toString());
      this.$accessibleElement.prop('disabled', true);
    }
  }

  /**
   * Sets the current content of this ActiveBox
   * @param {module:boxes/ActiveBoxContent.ActiveBoxContent} abc - The content to set.
   */
  setCurrentContent(abc) {
    if (this.isAlternative())
      this.setAltContent(abc);
    else
      this.setContent(abc);
    this.invalidate();
  }

  /**
   * Puts this ActiveBox in "alternative" mode, meaning that `altContent` will be used instead of `content`
   */
  switchToAlt() {
    if (this.isAlternative() || !this.altContent || this.altContent.isEmpty())
      return false;
    this.setHostedComponent(null);
    this.setHostedMediaPlayer(null);
    this.setAlternative(true);
    this.tmpTrans = false;
    this.checkHostedComponent();
    this.checkAutoStartMedia();

    if (this.$accessibleElement)
      this.$accessibleElement.html(this.toString());

    return true;
  }

  /**
   * Checks the presence of content susceptible to be treated as HTML DOM embedded in this ActiveBox.
   * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Drawing_DOM_objects_into_a_canvas}
   */
  checkHostedComponent() {
    if (this.hasHostedComponent)
      return;
    const
      abc = this.getCurrentContent(),
      style = this.getBoxBaseResolve();
    if (!this.isInactive() &amp;&amp; abc &amp;&amp; abc.innerHtmlText)
      style.getCSS()['text-align'] = abc.txtAlign.h.replace('middle', 'center');
  }

  /**
   * Checks if the call has a {@link module:media/MediaContent.MediaContent} set to `autostart`, and launches it when found.
   */
  checkAutoStartMedia() {
    const cnt = this.getContent();
    if (cnt &amp;&amp; cnt.mediaContent &amp;&amp; cnt.mediaContent.autoStart &amp;&amp; cnt.amp) {
      cnt.amp.playNow(this);
    }
  }

  /**
   * Draws the content of this Activebox on the specified canvas context.
   * @override
   * @param {external:CanvasRenderingContext2D} ctx - The canvas rendering context used to draw the
   * box content.
   * @param {module:AWT.Rectangle} [dirtyRegion] - The area that must be repainted. `null` refers to the whole box.
   */
  updateContent(ctx, dirtyRegion) {

    const
      abc = this.getCurrentContent(),
      style = this.getBoxBaseResolve();

    if (this.isInactive() || !abc || this.dim.width &lt; 2 || this.dim.height &lt; 2) {
      this._focusAccessibleElement(ctx);
      return true;
    }

    if (dirtyRegion &amp;&amp; !this.intersects(dirtyRegion))
      return false;

    let imgRect = null;

    if (abc.img &amp;&amp; !this.tmpTrans) {
      try {
        if (abc.imgClip) {
          const r = abc.imgClip.getBounds();
          let img = abc.img;
          if (!abc.imgClip.isRect()) {
            // Prepare a temporary `canvas` object that will contain the clipped image
            const tmpCanvas = document.createElement('canvas');
            tmpCanvas.width = r.pos.x + r.dim.width;
            tmpCanvas.height = r.pos.y + r.dim.height;
            const tmpCtx = tmpCanvas.getContext('2d');
            // Set the clipping region
            abc.imgClip.clip(tmpCtx);
            // Draw the original image
            tmpCtx.drawImage(abc.img, 0, 0);
            // Use the temporary canvas as a source image
            // (as seen on: [http://stackoverflow.com/questions/7242006/html5-copy-a-canvas-to-image-and-back])
            img = tmpCanvas;
          }
          ctx.drawImage(img,
            Math.max(0, r.pos.x), Math.max(0, r.pos.y), Math.min(img.width, r.dim.width), Math.min(img.height, r.dim.height),
            this.pos.x, this.pos.y, this.dim.width, this.dim.height);
        } else {
          let
            imgw = abc.img.naturalWidth || this.dim.width,
            imgh = abc.img.naturalHeight || this.dim.height,
            compress = false,
            scale = 1.0;
          if (settings.COMPRESS_IMAGES &amp;&amp;
            (this.dim.width > 0 &amp;&amp; this.dim.height > 0) &amp;&amp;
            (imgw > this.dim.width || imgh > this.dim.height)) {

            scale = Math.min(this.dim.width / imgw, this.dim.height / imgh);
            imgw *= scale;
            imgh *= scale;
            compress = true;
          }
          const xs = abc.imgAlign.h === 'left' ? 0
            : abc.imgAlign.h === 'right' ? this.dim.width - imgw
              : (this.dim.width - imgw) / 2;
          const ys = abc.imgAlign.v === 'top' ? 0
            : abc.imgAlign.v === 'bottom' ? this.dim.height - imgh
              : (this.dim.height - imgh) / 2;
          if (compress) {
            ctx.drawImage(abc.img, this.pos.x + xs, this.pos.y + ys, imgw, imgh);
          } else
            ctx.drawImage(abc.img, this.pos.x + xs, this.pos.y + ys);

          if (abc.avoidOverlapping &amp;&amp; abc.text)
            imgRect = new Rectangle(
              Math.max(0, xs), Math.max(0, ys),
              Math.min(this.dim.width, imgw), Math.min(this.dim.height, imgh));
        }
      } catch (ex) {
        log('warn', `Unable to draw image "${abc.image}": ${ex.message}`);
      }
    }
    if (abc.text &amp;&amp; abc.text.length > 0) {
      let
        px = this.pos.x,
        py = this.pos.y,
        pWidth = this.dim.width,
        pHeight = this.dim.height;

      if (imgRect) {
        // There is an image in the ActiveBox
        // Try to compute the current space available for text
        const
          prx = [0, imgRect.pos.x, imgRect.pos.x + imgRect.dim.width, pWidth],
          pry = [0, imgRect.pos.y, imgRect.pos.y + imgRect.dim.height, pHeight],
          rr = [
            // Calc four rectangles inside BoxBag, sourronding imgRect
            // Top rectangle:
            new Rectangle(prx[0], pry[0], prx[3], pry[1]),
            // Bottom rectangle:
            new Rectangle(prx[0], pry[2], prx[3], pry[3] - pry[2]),
            // Left rectangle:
            new Rectangle(prx[0], pry[0], prx[1], pry[3]),
            // Right rectangle:
            new Rectangle(prx[2], pry[0], prx[3] - prx[2], pry[3])
          ];
        //
        // Find the rectangle with highest surface, and in accordance
        // with the `txtAlign` values of the current
        // [ActiveBoxContent](ActiveBoxContent)
        let rmax = rr[0];
        let maxSurface = rmax.dim.width * rmax.dim.height;
        for (let i = 1; i &lt; rr.length; i++) {
          let s = rr[i].dim.width * rr[i].dim.height;
          if (s > maxSurface - 1) {
            if (Math.abs(s - maxSurface) &lt;= 1) {
              let b = false;
              switch (i) {
                case 1:
                  b = abc.txtAlign.v === 'bottom';
                  break;
                case 2:
                  b = abc.txtAlign.h === 'left';
                  break;
                case 3:
                  b = abc.txtAlign.h === 'right';
                  break;
              }
              if (!b)
                continue;
            }
            maxSurface = s;
            rmax = rr[i];
          }
        }
        // Finally, this is the surface available to draw text:
        px += rmax.pos.x;
        py += rmax.pos.y;
        pWidth = rmax.dim.width;
        pHeight = rmax.dim.height;
      }

      // Calc available width and height, discounting margins
      const
        availWidth = Math.max(5, pWidth - 2 * style.textMargin),
        availHeight = Math.max(5, pHeight - 2 * style.textMargin);

      // Calc the size of each line
      const lines = style.prepareText(ctx, abc.text, availWidth, availHeight);

      ctx.font = style.font.cssFont();
      ctx.textBaseline = 'alphabetic';
      const
        lineHeight = style.font.getHeight(),
        totalHeight = lineHeight * lines.length;

      // Calc the vertical co-ordinate of the first line
      // Default is 'middle'
      let y = py + style.textMargin + (abc.txtAlign.v === 'top' ? 0
        : abc.txtAlign.v === 'bottom' ? availHeight - totalHeight
          : (availHeight - totalHeight) / 2) + style.font.getMetrics().ascent;

      for (let l = 0; l &lt; lines.length; l++, y += lineHeight) {
        // Calc the horizontal position of each line
        // Default is 'middle'
        const x = px + style.textMargin + (abc.txtAlign.h === 'left' ? 0
          : abc.txtAlign.h === 'right' ?
            availWidth - lines[l].size.width
            : (availWidth - lines[l].size.width) / 2);

        if (style.shadow) {
          // Render text shadow
          const d = Math.max(1, style.font.size / 10);
          ctx.fillStyle = style.shadowColor;
          ctx.fillText(lines[l].text, x + d, y + d);
        }
        // Render text
        ctx.fillStyle = this.isInverted() ? style.backColor
          : this.isAlternative() ? style.alternativeColor : style.textColor;
        ctx.fillText(lines[l].text, x, y);
      }

      this._focusAccessibleElement(ctx);

    }
    return true;
  }

  /**
   * Draw focus on accessible element if needed
   * @param {external:CanvasRenderingContext2D} ctx - The canvas rendering context used to draw the
   * box content.
   */
  _focusAccessibleElement(ctx) {
    if (settings.CANVAS_DRAW_FOCUS &amp;&amp; this.$accessibleElement) {
      this.shape.preparePath(ctx);
      ctx.drawFocusIfNeeded(this.$accessibleElement.get(-1));
    }
  }


  /**
   * Gets the `description` field of the current {@link module:boxes/ActiveBoxContent.ActiveBoxContent ActiveBoxContent}
   * @returns {string}
   */
  getDescription() {
    return this.content ? this.content.getDescription() : '';
  }

  /**
   * Gets a descriptive text for this ActiveBox
   * @returns {string}
   */
  toString() {
    return (this.role !== 'cell' ? getMsg(this.role) : '') + (this.getCurrentContent() || '-').toString();
  }

  /**
   * Plays the action or media associated with this ActiveBox
   * @param {module:JClicPlayer.JClicPlayer} ps - Usually, a {@link module:JClicPlayer.JClicPlayer JClicPlayer}
   * @param {function[]} delayedActions - If set, store the the action in this array for future execution
   */
  playMedia(ps, delayedActions = null) {
    const abc = this.getCurrentContent();
    if (abc &amp;&amp; abc.mediaContent) {
      log('debug', `Playing: ${abc.mediaContent.toString()}`);
      ps.playMedia(abc.mediaContent, this, delayedActions);
      return true;
    }
    return false;
  }

  /**
   * Sets the hosted media player of this ActiveBox
   * @param {module:media/ActiveMediaPlayer.ActiveMediaPlayer} amp - The media player.
   */
  setHostedMediaPlayer(amp) {
    const old = this.hostedMediaPlayer;
    this.hostedMediaPlayer = amp;
    if (old &amp;&amp; old !== amp)
      old.linkTo(null);
    if (amp)
      amp.linkTo(this);
  }

  /**
   * Sets a new size and/or dimension to this box.
   * @override
   * @param {AWT.Rectangle|number} rect - An AWT.Rectangle object, or the `x` coordinate of the
   * upper-left corner of a new rectangle.
   * @param {number} [y] - `y` coordinate of the upper-left corner of the new rectangle.
   * @param {number} [w] - Width of the new rectangle.
   * @param {number} [h] - Height of the new rectangle.
   */
  setBounds(rect, y, w, h) {
    if (typeof rect === 'number')
      // arguments are co-ordinates and size
      rect = new Rectangle(rect, y, w, h);
    // Rectangle comparision
    if (this.equals(rect))
      return;
    super.setBounds(rect);
    if (this.hostedMediaPlayer)
      this.hostedMediaPlayer.checkVisualComponentBounds(this);
  }

  /**
   * Places and resizes {@link module:boxes/AbstractBox.AbstractBox#$hostedComponent $hostedComponent}, based on the size
   * and position of this box.
   * @override
   * @param {boolean} sizeChanged - `true` when this {@link module:boxes/ActiveBox.ActiveBox ActiveBox} has changed its size
   */
  setHostedComponentBounds(sizeChanged) {
    if (this.$hostedComponent) {
      super.setHostedComponentBounds(sizeChanged);
      const abc = this.getCurrentContent();
      if (sizeChanged &amp;&amp; abc &amp;&amp; abc.animatedGifFile &amp;&amp; abc.img) {
        const
          img = abc.img,
          w = Math.max(img.naturalWidth, this.dim.width),
          h = Math.max(img.naturalHeight, this.dim.height);
        let scale = 1, bgSize = '';
        if (abc.imgClip) {
          const r = abc.imgClip.getBounds();
          if (this.dim.width &lt; r.dim.width || this.dim.height &lt; r.dim.height) {
            scale = Math.min(this.dim.width / r.dim.width, this.dim.height / r.dim.height);
            bgSize = `${w * scale}px ${h * scale}px`;
          }
          this.$hostedComponent.css({
            'background-position': `${-abc.imgClip.pos.x * scale}px ${-abc.imgClip.pos.y * scale}px`,
            'background-size': bgSize
          });
        } else {
          if (this.dim.width &lt; w || this.dim.height &lt; h) {
            scale = Math.min(this.dim.width / w, this.dim.height / h);
            bgSize = `${w * scale}px ${h * scale}px`;
          }
          this.$hostedComponent.css({
            'background-size': bgSize
          });
        }
      }
    }
  }

  /**
   * Builds a hidden `buton` that will act as a accessible element associated to the canvas area
   * of this ActiveBox.
   * The button will be created only when `CanvasRenderingContext2D` has a method named `addHitRegion`.
   * See https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Hit_regions_and_accessibility
   * for more information and supported browsers.
   * @param {external:jQuery} $canvas - The `canvas` where this `ActiveBox` will deploy, wrapped up in a jQuery object
   * @param {external:jQuery} $clickReceiver - The DOM element that will be notified  when `$accessibleElement` is activated.
   * @param {external:jQuery} [$canvasGroup] - Optional DOM element containing the accessible element. Useful to group cells in associations. When `null`, the element belongs to $canvas.
   * @param {string} [eventType] - Type of event sent to $clickReceiver. Default is `click`.
   * @returns {external:jQuery} - The accessible element associated to this ActiveBox.
   */
  buildAccessibleElement($canvas, $clickReceiver, $canvasGroup, eventType) {
    if (this.$accessibleElement)
      this.$accessibleElement.remove();

    const canvas = $canvas.get(-1);
    if (canvas.width > 0 &amp;&amp; canvas.height > 0) {
      const
        id = Math.round(Math.random() * 100000),
        disabled = this.isInactive() &amp;&amp; !this.accessibleAlwaysActive;
      this.$accessibleElement = $('&lt;button/>', {
        tabindex: disabled ? -1 : 0,
        id: `AE${id}`,
        disabled: disabled
      })
        .html(this.toString())
        .on('click', ev => {
          // Check if event was produced by a mouse click
          if (ev.originalEvent &amp;&amp; (ev.originalEvent.pageX !== 0 || ev.originalEvent.pageY !== 0)) {
            // Mouse clicks should be processed odirectly by the canvas, so ignore this accessible event
            return true;
          }
          log('debug', `Click on accessible element: ${this.toString()}`);
          const
            $event = $.Event(eventType || 'click'),
            bounds = this.getBounds(),
            offset = $canvas.offset();
          $event.pageX = offset.left + bounds.pos.x + bounds.dim.width / 2;
          $event.pageY = offset.top + bounds.pos.y + bounds.dim.height / 2;
          $clickReceiver.trigger($event);
          return false;
        });
      const $dest = $canvasGroup || $canvas;
      $dest.append(this.$accessibleElement);
      if (settings.CANVAS_DRAW_FOCUS) {
        this.$accessibleElement.on('focus blur', ev => {
          log('debug', `${ev.type} accessible element: ${this.toString()}`);
          if (this.container)
            this.container.update();
          this.updateContent(canvas.getContext('2d'), null);
        });
      }
    }
    return this.$accessibleElement;
  }
}

Object.assign(ActiveBox.prototype, {
  /**
   * Identifier used to set the relative position of this box in a set.
   * @name module:boxes/ActiveBox.ActiveBox#idOrder
   * @type {number} */
  idOrder: -1,
  /**
   * Identifier used to set a relative position in the space.
   * @name module:boxes/ActiveBox.ActiveBox#idLoc
   * @type {number} */
  idLoc: -1,
  /**
   * Identifier used to establish relationships between cells of different sets (in associations)
   * @name module:boxes/ActiveBox.ActiveBox#idAss
   * @type {number} */
  idAss: -1,
  /**
   * Backup of the original position of the cell, useful when the real position must be restored after a temporary change.
   * @name module:boxes/ActiveBox.ActiveBox#pos0
   * @type {module:AWT.Point} */
  pos0: null,
  /**
   * Main content of this box
   * @name module:boxes/ActiveBox.ActiveBox#content
   * @type {module:boxes/ActiveBoxContent.ActiveBoxContent} */
  content: null,
  /**
   * Alternative content of this box
   * @name module:boxes/ActiveBox.ActiveBox#altContent
   * @type {module:boxes/ActiveBoxContent.ActiveBoxContent} */
  altContent: null,
  /**
   * Flag to check if this box has a 'hosted component'
   * @name module:boxes/ActiveBox.ActiveBox#hostedComponent
   * @type {boolean} */
  hasHostedComponent: false,
  /**
   * The media player associated to this box
   * @name module:boxes/ActiveBox.ActiveBox#hostedMediaPlayer
   * @type {module:media/ActiveMediaPlayer.ActiveMediaPlayer} */
  hostedMediaPlayer: null,
  /**
   * Indicates that this box is used as a background. When drawing, the clipping region must be respected.
   * @name module:boxes/ActiveBox.ActiveBox#isBackground
   * @type {boolean} */
  isBackground: false,
});

export default ActiveBox;

</code></pre></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><a href="/" class="sidebar-title sidebar-title-anchor">Home</a><div class="mobile-nav-links"></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="qHlACl8CFdcBMSnoHvrhv"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-AWT.html">AWT</a></div><div class="sidebar-section-children"><a href="module-Activity.html">Activity</a></div><div class="sidebar-section-children"><a href="module-JClic.html">JClic</a></div><div class="sidebar-section-children"><a href="module-JClicPlayer.html">JClicPlayer</a></div><div class="sidebar-section-children"><a href="module-PlayerHistory.html">PlayerHistory</a></div><div class="sidebar-section-children"><a href="module-Utils.html">Utils</a></div><div class="sidebar-section-children"><a href="module-activities_associations_ComplexAssociation.html">activities/associations/ComplexAssociation</a></div><div class="sidebar-section-children"><a href="module-activities_associations_SimpleAssociation.html">activities/associations/SimpleAssociation</a></div><div class="sidebar-section-children"><a href="module-activities_memory_MemoryGame.html">activities/memory/MemoryGame</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Explore.html">activities/panels/Explore</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Identify.html">activities/panels/Identify</a></div><div class="sidebar-section-children"><a href="module-activities_panels_InformationScreen.html">activities/panels/InformationScreen</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Menu.html">activities/panels/Menu</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_DoublePuzzle.html">activities/puzzles/DoublePuzzle</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_ExchangePuzzle.html">activities/puzzles/ExchangePuzzle</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_HolePuzzle.html">activities/puzzles/HolePuzzle</a></div><div class="sidebar-section-children"><a href="module-activities_text_Complete.html">activities/text/Complete</a></div><div class="sidebar-section-children"><a href="module-activities_text_Evaluator.html">activities/text/Evaluator</a></div><div class="sidebar-section-children"><a href="module-activities_text_FillInBlanks.html">activities/text/FillInBlanks</a></div><div class="sidebar-section-children"><a href="module-activities_text_IdentifyText.html">activities/text/IdentifyText</a></div><div class="sidebar-section-children"><a href="module-activities_text_OrderText.html">activities/text/OrderText</a></div><div class="sidebar-section-children"><a href="module-activities_text_TextActivityBase.html">activities/text/TextActivityBase</a></div><div class="sidebar-section-children"><a href="module-activities_text_TextActivityDocument.html">activities/text/TextActivityDocument</a></div><div class="sidebar-section-children"><a href="module-activities_text_WrittenAnswer.html">activities/text/WrittenAnswer</a></div><div class="sidebar-section-children"><a href="module-activities_textGrid_CrossWord.html">activities/textGrid/CrossWord</a></div><div class="sidebar-section-children"><a href="module-activities_textGrid_WordSearch.html">activities/textGrid/WordSearch</a></div><div class="sidebar-section-children"><a href="module-automation_AutoContentProvider.html">automation/AutoContentProvider</a></div><div class="sidebar-section-children"><a href="module-automation_arith_Arith.html">automation/arith/Arith</a></div><div class="sidebar-section-children"><a href="module-bags_ActivitySequence.html">bags/ActivitySequence</a></div><div class="sidebar-section-children"><a href="module-bags_ActivitySequenceElement.html">bags/ActivitySequenceElement</a></div><div class="sidebar-section-children"><a href="module-bags_ActivitySequenceJump.html">bags/ActivitySequenceJump</a></div><div class="sidebar-section-children"><a href="module-bags_ConditionalJumpInfo.html">bags/ConditionalJumpInfo</a></div><div class="sidebar-section-children"><a href="module-bags_JumpInfo.html">bags/JumpInfo</a></div><div class="sidebar-section-children"><a href="module-bags_MediaBag.html">bags/MediaBag</a></div><div class="sidebar-section-children"><a href="module-bags_MediaBagElement.html">bags/MediaBagElement</a></div><div class="sidebar-section-children"><a href="module-boxes_AbstractBox.html">boxes/AbstractBox</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBagContent.html">boxes/ActiveBagContent</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBox.html">boxes/ActiveBox</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxBag.html">boxes/ActiveBoxBag</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxContent.html">boxes/ActiveBoxContent</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxGrid.html">boxes/ActiveBoxGrid</a></div><div class="sidebar-section-children"><a href="module-boxes_BoxBag.html">boxes/BoxBag</a></div><div class="sidebar-section-children"><a href="module-boxes_BoxBase.html">boxes/BoxBase</a></div><div class="sidebar-section-children"><a href="module-boxes_BoxConnector.html">boxes/BoxConnector</a></div><div class="sidebar-section-children"><a href="module-boxes_TextGrid.html">boxes/TextGrid</a></div><div class="sidebar-section-children"><a href="module-boxes_TextGridContent.html">boxes/TextGridContent</a></div><div class="sidebar-section-children"><a href="module-media_ActiveMediaBag.html">media/ActiveMediaBag</a></div><div class="sidebar-section-children"><a href="module-media_ActiveMediaPlayer.html">media/ActiveMediaPlayer</a></div><div class="sidebar-section-children"><a href="module-media_AudioBuffer.html">media/AudioBuffer</a></div><div class="sidebar-section-children"><a href="module-media_EventSounds.html">media/EventSounds</a></div><div class="sidebar-section-children"><a href="module-media_EventSoundsElement.html">media/EventSoundsElement</a></div><div class="sidebar-section-children"><a href="module-media_MediaContent.html">media/MediaContent</a></div><div class="sidebar-section-children"><a href="module-media_MidiAudioPlayer.html">media/MidiAudioPlayer</a></div><div class="sidebar-section-children"><a href="module-project_JClicProject.html">project/JClicProject</a></div><div class="sidebar-section-children"><a href="module-project_ProjectSettings.html">project/ProjectSettings</a></div><div class="sidebar-section-children"><a href="module-report_ActionReg.html">report/ActionReg</a></div><div class="sidebar-section-children"><a href="module-report_ActivityReg.html">report/ActivityReg</a></div><div class="sidebar-section-children"><a href="module-report_EncryptMin.html">report/EncryptMin</a></div><div class="sidebar-section-children"><a href="module-report_Reporter.html">report/Reporter</a></div><div class="sidebar-section-children"><a href="module-report_SCORM.html">report/SCORM</a></div><div class="sidebar-section-children"><a href="module-report_SequenceReg.html">report/SequenceReg</a></div><div class="sidebar-section-children"><a href="module-report_SessionReg.html">report/SessionReg</a></div><div class="sidebar-section-children"><a href="module-report_SessionStorageReporter.html">report/SessionStorageReporter</a></div><div class="sidebar-section-children"><a href="module-report_TCPReporter.html">report/TCPReporter</a></div><div class="sidebar-section-children"><a href="module-shapers_ClassicJigSaw.html">shapers/ClassicJigSaw</a></div><div class="sidebar-section-children"><a href="module-shapers_Holes.html">shapers/Holes</a></div><div class="sidebar-section-children"><a href="module-shapers_JigSaw.html">shapers/JigSaw</a></div><div class="sidebar-section-children"><a href="module-shapers_Rectangular.html">shapers/Rectangular</a></div><div class="sidebar-section-children"><a href="module-shapers_Shaper.html">shapers/Shaper</a></div><div class="sidebar-section-children"><a href="module-shapers_TriangularJigSaw.html">shapers/TriangularJigSaw</a></div><div class="sidebar-section-children"><a href="module-skins_BlueSkin.html">skins/BlueSkin</a></div><div class="sidebar-section-children"><a href="module-skins_Counter.html">skins/Counter</a></div><div class="sidebar-section-children"><a href="module-skins_CustomSkin.html">skins/CustomSkin</a></div><div class="sidebar-section-children"><a href="module-skins_DefaultSkin.html">skins/DefaultSkin</a></div><div class="sidebar-section-children"><a href="module-skins_EmptySkin.html">skins/EmptySkin</a></div><div class="sidebar-section-children"><a href="module-skins_GreenSkin.html">skins/GreenSkin</a></div><div class="sidebar-section-children"><a href="module-skins_MiniSkin.html">skins/MiniSkin</a></div><div class="sidebar-section-children"><a href="module-skins_OrangeSkin.html">skins/OrangeSkin</a></div><div class="sidebar-section-children"><a href="module-skins_SimpleSkin.html">skins/SimpleSkin</a></div><div class="sidebar-section-children"><a href="module-skins_Skin.html">skins/Skin</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="xnPDc3I_kKVhPtm1lO4E8"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-AWT.Action.html">Action</a></div><div class="sidebar-section-children"><a href="module-AWT.Container.html">Container</a></div><div class="sidebar-section-children"><a href="module-AWT.Dimension.html">Dimension</a></div><div class="sidebar-section-children"><a href="module-AWT.Ellipse.html">Ellipse</a></div><div class="sidebar-section-children"><a href="module-AWT.Font.html">Font</a></div><div class="sidebar-section-children"><a href="module-AWT.Gradient.html">Gradient</a></div><div class="sidebar-section-children"><a href="module-AWT.Path.html">Path</a></div><div class="sidebar-section-children"><a href="module-AWT.PathStroke.html">PathStroke</a></div><div class="sidebar-section-children"><a href="module-AWT.Point.html">Point</a></div><div class="sidebar-section-children"><a href="module-AWT.Rectangle.html">Rectangle</a></div><div class="sidebar-section-children"><a href="module-AWT.Shape.html">Shape</a></div><div class="sidebar-section-children"><a href="module-AWT.Stroke.html">Stroke</a></div><div class="sidebar-section-children"><a href="module-AWT.Timer.html">Timer</a></div><div class="sidebar-section-children"><a href="module-Activity.Activity.html">Activity</a></div><div class="sidebar-section-children"><a href="module-Activity.ActivityPanel.html">ActivityPanel</a></div><div class="sidebar-section-children"><a href="module-JClicPlayer.JClicPlayer.html">JClicPlayer</a></div><div class="sidebar-section-children"><a href="module-PlayerHistory.PlayerHistory.html">PlayerHistory</a></div><div class="sidebar-section-children"><a href="module-activities_associations_ComplexAssociation.ComplexAssociation.html">ComplexAssociation</a></div><div class="sidebar-section-children"><a href="module-activities_associations_ComplexAssociation.ComplexAssociationPanel.html">ComplexAssociationPanel</a></div><div class="sidebar-section-children"><a href="module-activities_associations_SimpleAssociation.SimpleAssociation.html">SimpleAssociation</a></div><div class="sidebar-section-children"><a href="module-activities_associations_SimpleAssociation.SimpleAssociationPanel.html">SimpleAssociationPanel</a></div><div class="sidebar-section-children"><a href="module-activities_memory_MemoryGame.MemoryGame.html">MemoryGame</a></div><div class="sidebar-section-children"><a href="module-activities_memory_MemoryGame.MemoryGamePanel.html">MemoryGamePanel</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Explore.Explore.html">Explore</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Explore.ExplorePanel.html">ExplorePanel</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Identify.Identify.html">Identify</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Identify.IdentifyPanel.html">IdentifyPanel</a></div><div class="sidebar-section-children"><a href="module-activities_panels_InformationScreen.InformationScreen.html">InformationScreen</a></div><div class="sidebar-section-children"><a href="module-activities_panels_InformationScreen.InformationScreenPanel.html">InformationScreenPanel</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Menu.Menu.html">Menu</a></div><div class="sidebar-section-children"><a href="module-activities_panels_Menu.MenuPanel.html">MenuPanel</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_DoublePuzzle.DoublePuzzle.html">DoublePuzzle</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_DoublePuzzle.DoublePuzzlePanel.html">DoublePuzzlePanel</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_ExchangePuzzle.ExchangePuzzle.html">ExchangePuzzle</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_ExchangePuzzle-ExchangePuzzlePanel.html">ExchangePuzzlePanel</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_HolePuzzle.HolePuzzle.html">HolePuzzle</a></div><div class="sidebar-section-children"><a href="module-activities_puzzles_HolePuzzle.HolePuzzlePanel.html">HolePuzzlePanel</a></div><div class="sidebar-section-children"><a href="module-activities_text_Complete.Complete.html">Complete</a></div><div class="sidebar-section-children"><a href="module-activities_text_Complete.CompletePanel.html">CompletePanel</a></div><div class="sidebar-section-children"><a href="module-activities_text_Evaluator.BasicEvaluator.html">BasicEvaluator</a></div><div class="sidebar-section-children"><a href="module-activities_text_Evaluator.ComplexEvaluator.html">ComplexEvaluator</a></div><div class="sidebar-section-children"><a href="module-activities_text_Evaluator.Evaluator.html">Evaluator</a></div><div class="sidebar-section-children"><a href="module-activities_text_FillInBlanks.FillInBlanks.html">FillInBlanks</a></div><div class="sidebar-section-children"><a href="module-activities_text_FillInBlanks.FillInBlanksPanel.html">FillInBlanksPanel</a></div><div class="sidebar-section-children"><a href="module-activities_text_IdentifyText.IdentifyText.html">IdentifyText</a></div><div class="sidebar-section-children"><a href="module-activities_text_IdentifyText-IdentifyTextPanel.html">IdentifyTextPanel</a></div><div class="sidebar-section-children"><a href="module-activities_text_OrderText.OrderText.html">OrderText</a></div><div class="sidebar-section-children"><a href="module-activities_text_OrderText.OrderTextPanel.html">OrderTextPanel</a></div><div class="sidebar-section-children"><a href="module-activities_text_TextActivityBase.TextActivityBase.html">TextActivityBase</a></div><div class="sidebar-section-children"><a href="module-activities_text_TextActivityBase.TextActivityBasePanel.html">TextActivityBasePanel</a></div><div class="sidebar-section-children"><a href="module-activities_text_TextActivityDocument.TextActivityDocument.html">TextActivityDocument</a></div><div class="sidebar-section-children"><a href="module-activities_text_TextActivityDocument.TextTarget.html">TextTarget</a></div><div class="sidebar-section-children"><a href="module-activities_text_WrittenAnswer.WrittenAnswer.html">WrittenAnswer</a></div><div class="sidebar-section-children"><a href="module-activities_text_WrittenAnswer.WrittenAnswerPanel.html">WrittenAnswerPanel</a></div><div class="sidebar-section-children"><a href="module-activities_textGrid_CrossWord.CrossWord.html">CrossWord</a></div><div class="sidebar-section-children"><a href="module-activities_textGrid_CrossWord.CrossWordPanel.html">CrossWordPanel</a></div><div class="sidebar-section-children"><a href="module-activities_textGrid_WordSearch.WordSearch.html">WordSearch</a></div><div class="sidebar-section-children"><a href="module-activities_textGrid_WordSearch.WordSearchPanel.html">WordSearchPanel</a></div><div class="sidebar-section-children"><a href="module-automation_AutoContentProvider.AutoContentProvider.html">AutoContentProvider</a></div><div class="sidebar-section-children"><a href="module-automation_AutoContentProvider.AutoContentProvider.ActiveBagContentKit.html">ActiveBagContentKit</a></div><div class="sidebar-section-children"><a href="module-automation_arith_Arith.Arith.html">Arith</a></div><div class="sidebar-section-children"><a href="module-automation_arith_Arith.Arith.Operator.html">Operator</a></div><div class="sidebar-section-children"><a href="module-bags_ActivitySequence.ActivitySequence.html">ActivitySequence</a></div><div class="sidebar-section-children"><a href="module-bags_ActivitySequenceElement.ActivitySequenceElement.html">ActivitySequenceElement</a></div><div class="sidebar-section-children"><a href="module-bags_ActivitySequenceJump.ActivitySequenceJump.html">ActivitySequenceJump</a></div><div class="sidebar-section-children"><a href="module-bags_ConditionalJumpInfo.ConditionalJumpInfo.html">ConditionalJumpInfo</a></div><div class="sidebar-section-children"><a href="module-bags_JumpInfo.JumpInfo.html">JumpInfo</a></div><div class="sidebar-section-children"><a href="module-bags_MediaBag.MediaBag.html">MediaBag</a></div><div class="sidebar-section-children"><a href="module-bags_MediaBagElement.MediaBagElement.html">MediaBagElement</a></div><div class="sidebar-section-children"><a href="module-boxes_AbstractBox.AbstractBox.html">AbstractBox</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBagContent.ActiveBagContent.html">ActiveBagContent</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBox.ActiveBox.html">ActiveBox</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxBag.ActiveBoxBag.html">ActiveBoxBag</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxContent.ActiveBoxContent.html">ActiveBoxContent</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxContent.AlignType.html">AlignType</a></div><div class="sidebar-section-children"><a href="module-boxes_ActiveBoxGrid.ActiveBoxGrid.html">ActiveBoxGrid</a></div><div class="sidebar-section-children"><a href="module-boxes_BoxBag.BoxBag.html">BoxBag</a></div><div class="sidebar-section-children"><a href="module-boxes_BoxBase.BoxBase.html">BoxBase</a></div><div class="sidebar-section-children"><a href="module-boxes_BoxConnector.BoxConnector.html">BoxConnector</a></div><div class="sidebar-section-children"><a href="module-boxes_TextGrid.TextGrid.html">TextGrid</a></div><div class="sidebar-section-children"><a href="module-boxes_TextGridContent.TextGridContent.html">TextGridContent</a></div><div class="sidebar-section-children"><a href="module-media_ActiveMediaBag.ActiveMediaBag.html">ActiveMediaBag</a></div><div class="sidebar-section-children"><a href="module-media_ActiveMediaPlayer.ActiveMediaPlayer.html">ActiveMediaPlayer</a></div><div class="sidebar-section-children"><a href="module-media_AudioBuffer.AudioBuffer.html">AudioBuffer</a></div><div class="sidebar-section-children"><a href="module-media_EventSounds.EventSounds.html">EventSounds</a></div><div class="sidebar-section-children"><a href="module-media_EventSoundsElement.EventSoundsElement.html">EventSoundsElement</a></div><div class="sidebar-section-children"><a href="module-media_MediaContent.MediaContent.html">MediaContent</a></div><div class="sidebar-section-children"><a href="module-media_MidiAudioPlayer.MidiAudioPlayer.html">MidiAudioPlayer</a></div><div class="sidebar-section-children"><a href="module-project_JClicProject.JClicProject.html">JClicProject</a></div><div class="sidebar-section-children"><a href="module-project_ProjectSettings.ProjectSettings.html">ProjectSettings</a></div><div class="sidebar-section-children"><a href="module-report_ActionReg.ActionReg.html">ActionReg</a></div><div class="sidebar-section-children"><a href="module-report_ActivityReg.ActivityReg.html">ActivityReg</a></div><div class="sidebar-section-children"><a href="module-report_EncryptMin.Encryption.html">Encryption</a></div><div class="sidebar-section-children"><a href="module-report_Reporter.Reporter.html">Reporter</a></div><div class="sidebar-section-children"><a href="module-report_Reporter.ReporterInfo.html">ReporterInfo</a></div><div class="sidebar-section-children"><a href="module-report_SCORM.SCORM.html">SCORM</a></div><div class="sidebar-section-children"><a href="module-report_SequenceReg.SequenceReg.html">SequenceReg</a></div><div class="sidebar-section-children"><a href="module-report_SequenceReg.SequenceRegInfo.html">SequenceRegInfo</a></div><div class="sidebar-section-children"><a href="module-report_SessionReg.SessionReg.html">SessionReg</a></div><div class="sidebar-section-children"><a href="module-report_SessionReg.SessionRegInfo.html">SessionRegInfo</a></div><div class="sidebar-section-children"><a href="module-report_SessionStorageReporter.SessionStorageReporter.html">SessionStorageReporter</a></div><div class="sidebar-section-children"><a href="module-report_TCPReporter.ReportBean.html">ReportBean</a></div><div class="sidebar-section-children"><a href="module-report_TCPReporter.TCPReporter.html">TCPReporter</a></div><div class="sidebar-section-children"><a href="module-shapers_ClassicJigSaw.ClassicJigSaw.html">ClassicJigSaw</a></div><div class="sidebar-section-children"><a href="module-shapers_Holes.Holes.html">Holes</a></div><div class="sidebar-section-children"><a href="module-shapers_JigSaw.JigSaw.html">JigSaw</a></div><div class="sidebar-section-children"><a href="module-shapers_Rectangular.Rectangular.html">Rectangular</a></div><div class="sidebar-section-children"><a href="module-shapers_Shaper.Shaper.html">Shaper</a></div><div class="sidebar-section-children"><a href="module-shapers_TriangularJigSaw.TriangularJigSaw.html">TriangularJigSaw</a></div><div class="sidebar-section-children"><a href="module-skins_BlueSkin.BlueSkin.html">BlueSkin</a></div><div class="sidebar-section-children"><a href="module-skins_Counter.Counter.html">Counter</a></div><div class="sidebar-section-children"><a href="module-skins_CustomSkin.CustomSkin.html">CustomSkin</a></div><div class="sidebar-section-children"><a href="module-skins_DefaultSkin.DefaultSkin.html">DefaultSkin</a></div><div class="sidebar-section-children"><a href="module-skins_EmptySkin.EmptySkin.html">EmptySkin</a></div><div class="sidebar-section-children"><a href="module-skins_GreenSkin.GreenSkin.html">GreenSkin</a></div><div class="sidebar-section-children"><a href="module-skins_MiniSkin.MiniSkin.html">MiniSkin</a></div><div class="sidebar-section-children"><a href="module-skins_OrangeSkin.OrangeSkin.html">OrangeSkin</a></div><div class="sidebar-section-children"><a href="module-skins_SimpleSkin.SimpleSkin.html">SimpleSkin</a></div><div class="sidebar-section-children"><a href="module-skins_Skin.Skin.html">Skin</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="xJuSofp4IKU_YxKjABy4G"><div>Externals</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="external-AudioContext.html">AudioContext</a></div><div class="sidebar-section-children"><a href="external-CanvasRenderingContext2D.html">CanvasRenderingContext2D</a></div><div class="sidebar-section-children"><a href="external-Collator.html">Collator</a></div><div class="sidebar-section-children"><a href="external-Date.html">Date</a></div><div class="sidebar-section-children"><a href="external-Event.html">Event</a></div><div class="sidebar-section-children"><a href="external-HTMLAudioElement.html">HTMLAudioElement</a></div><div class="sidebar-section-children"><a href="external-HTMLElement.html">HTMLElement</a></div><div class="sidebar-section-children"><a href="external-HTMLImageElement.html">HTMLImageElement</a></div><div class="sidebar-section-children"><a href="external-HTMLStyleElement.html">HTMLStyleElement</a></div><div class="sidebar-section-children"><a href="external-Instrument.html">Instrument</a></div><div class="sidebar-section-children"><a href="external-JSZip.html">JSZip</a></div><div class="sidebar-section-children"><a href="external-MediaRecorder.html">MediaRecorder</a></div><div class="sidebar-section-children"><a href="external-MidiPlayerJS.html">MidiPlayerJS</a></div><div class="sidebar-section-children"><a href="external-NamedNodeMap.html">NamedNodeMap</a></div><div class="sidebar-section-children"><a href="external-Promise.html">Promise</a></div><div class="sidebar-section-children"><a href="external-Storage.html">Storage</a></div><div class="sidebar-section-children"><a href="external-jQuery.html">jQuery</a></div><div class="sidebar-section-children"><a href="external-jqXHR.html">jqXHR</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>